/*
 * æ–‡ä»¶è·¯å¾„: /d%3A/workspace/RustLearn/RustDesignPattern/src/EnterpriseAppPattern/ObjectRelationalBehavioralPatterns/mod.rs
 * 
 * Object-Relational Behavioral Patternsï¼ˆå¯¹è±¡-å…³ç³»è¡Œä¸ºæ¨¡å¼ï¼‰æ¨¡å—
 * 
 * è¯¥æ¨¡å—åŒ…å«Martin Fowlerã€Šä¼ä¸šåº”ç”¨æ¶æ„æ¨¡å¼ã€‹ä¸­çš„å¯¹è±¡-å…³ç³»è¡Œä¸ºæ¨¡å¼ï¼š
 * 
 * 1. Unit of Workï¼ˆå·¥ä½œå•å…ƒï¼‰
 * 2. Identity Mapï¼ˆèº«ä»½æ˜ å°„ï¼‰
 * 3. Lazy Loadï¼ˆå»¶è¿ŸåŠ è½½ï¼‰
 * 
 * è¿™äº›æ¨¡å¼ä¸»è¦è§£å†³å¯¹è±¡ä¸å…³ç³»æ•°æ®åº“äº¤äº’ä¸­çš„è¡Œä¸ºé—®é¢˜ã€‚
 */

pub mod unit_of_work;
pub mod identity_map;
pub mod lazy_load;

/// æ¼”ç¤ºæ‰€æœ‰å¯¹è±¡-å…³ç³»è¡Œä¸ºæ¨¡å¼
pub fn demo_all() {
    println!("ğŸ—„ï¸  === ä¼ä¸šåº”ç”¨æ¶æ„æ¨¡å¼ - å¯¹è±¡-å…³ç³»è¡Œä¸ºæ¨¡å¼æ¼”ç¤º ===\n");
    
    println!("ğŸ“‹ å¯¹è±¡-å…³ç³»è¡Œä¸ºæ¨¡å¼åŒ…æ‹¬ä»¥ä¸‹æ¨¡å¼:");
    println!("1. Unit of Workï¼ˆå·¥ä½œå•å…ƒï¼‰- ç»´æŠ¤äº‹åŠ¡ä¸­çš„å¯¹è±¡å˜æ›´");
    println!("2. Identity Mapï¼ˆèº«ä»½æ˜ å°„ï¼‰- ç¡®ä¿å¯¹è±¡å”¯ä¸€æ€§");
    println!("3. Lazy Loadï¼ˆå»¶è¿ŸåŠ è½½ï¼‰- æŒ‰éœ€åŠ è½½æ•°æ®");
    
    println!("\n{}", "=".repeat(80));
    
    // 1. Unit of Work æ¼”ç¤º
    println!("\nğŸš€ 1. Unit of Workï¼ˆå·¥ä½œå•å…ƒï¼‰æ¨¡å¼æ¼”ç¤º");
    println!("é€‚åˆï¼šå¤æ‚äº‹åŠ¡ç®¡ç†ï¼Œæ‰¹é‡æ•°æ®åº“æ“ä½œ");
    unit_of_work::demo();
    
    println!("\n{}", "=".repeat(80));
    
    // 2. Identity Map æ¼”ç¤º
    println!("\nğŸš€ 2. Identity Mapï¼ˆèº«ä»½æ˜ å°„ï¼‰æ¨¡å¼æ¼”ç¤º");
    println!("é€‚åˆï¼šç¡®ä¿å¯¹è±¡å”¯ä¸€æ€§ï¼Œé¿å…é‡å¤åŠ è½½");
    identity_map::demo();
    
    println!("\n{}", "=".repeat(80));
    
    // 3. Lazy Load æ¼”ç¤º
    println!("\nğŸš€ 3. Lazy Loadï¼ˆå»¶è¿ŸåŠ è½½ï¼‰æ¨¡å¼æ¼”ç¤º");
    println!("é€‚åˆï¼šå¤§å¯¹è±¡åŠ è½½ï¼Œæé«˜æ€§èƒ½");
    lazy_load::demo();
    
    println!("\n{}", "=".repeat(80));
    
    // æ¨¡å¼æ€»ç»“
    println!("\nğŸ“Š ã€å¯¹è±¡-å…³ç³»è¡Œä¸ºæ¨¡å¼æ€»ç»“ã€‘");
    println!("\næ ¸å¿ƒç›®æ ‡ï¼šä¼˜åŒ–å¯¹è±¡ä¸æ•°æ®åº“çš„äº¤äº’è¡Œä¸º");
    
    println!("\nå„æ¨¡å¼ç‰¹ç‚¹ï¼š");
    println!("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
    println!("â”‚     æ¨¡å¼        â”‚   ä¸»è¦ä½œç”¨   â”‚     è§£å†³é—®é¢˜     â”‚     å…³é”®æŠ€æœ¯     â”‚");
    println!("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
    println!("â”‚ Unit of Work    â”‚   äº‹åŠ¡ç®¡ç†   â”‚   æ‰¹é‡æ“ä½œä¼˜åŒ–   â”‚   å˜æ›´è¿½è¸ª       â”‚");
    println!("â”‚                 â”‚   çŠ¶æ€è¿½è¸ª   â”‚   æ•°æ®ä¸€è‡´æ€§     â”‚   ä¾èµ–æ’åº       â”‚");
    println!("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
    println!("â”‚ Identity Map    â”‚   å¯¹è±¡ç¼“å­˜   â”‚   é‡å¤åŠ è½½       â”‚   å¯¹è±¡æ ‡è¯†       â”‚");
    println!("â”‚                 â”‚   å”¯ä¸€æ€§     â”‚   å†…å­˜ä¸€è‡´æ€§     â”‚   å¼•ç”¨ç®¡ç†       â”‚");
    println!("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
    println!("â”‚ Lazy Load       â”‚   å»¶è¿ŸåŠ è½½   â”‚   æ€§èƒ½ä¼˜åŒ–       â”‚   ä»£ç†å¯¹è±¡       â”‚");
    println!("â”‚                 â”‚   æŒ‰éœ€è·å–   â”‚   å†…å­˜ä½¿ç”¨       â”‚   è™šæ‹Ÿä»£ç†       â”‚");
    println!("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
    
    println!("\nğŸ¯ è®¾è®¡ç›®æ ‡ï¼š");
    println!("1. æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘æ•°æ®åº“è®¿é—®æ¬¡æ•°");
    println!("2. å†…å­˜ç®¡ç†ï¼šæ§åˆ¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ");
    println!("3. ä¸€è‡´æ€§ä¿è¯ï¼šç»´æŠ¤æ•°æ®å®Œæ•´æ€§");
    println!("4. äº‹åŠ¡æ§åˆ¶ï¼šç®¡ç†å¤æ‚çš„ä¸šåŠ¡æ“ä½œ");
    println!("5. å¹¶å‘å®‰å…¨ï¼šå¤„ç†å¤šç”¨æˆ·è®¿é—®");
    
    println!("\nâœ¨ ç»„åˆä½¿ç”¨ï¼š");
    println!("â€¢ Unit of Work + Identity Mapï¼šå®Œæ•´çš„ä¼šè¯ç®¡ç†");
    println!("â€¢ Identity Map + Lazy Loadï¼šæ™ºèƒ½å¯¹è±¡ç¼“å­˜");
    println!("â€¢ ä¸‰è€…ç»“åˆï¼šé«˜æ€§èƒ½ORMå®ç°");
    
    println!("\nğŸ === å¯¹è±¡-å…³ç³»è¡Œä¸ºæ¨¡å¼æ¼”ç¤ºå®Œæˆ ===");
} 